### Chapter 13 - Indexes and Optimized Queries

## Introduction

There are a number of ways to optimize the queries that are generated by your Rails app. One way is to add indexes to the appropriate places. Another way to speed up your app is to optimize the queries that are auto-generated or hard-coded in your app.

## Indexes

As we discovered in chapters 8 and 9, adding indexes can significantly speed up the retrieval of data.

### Foreign Keys

When looking for ways to optimize our database, there are a number of places we can start. The first thing we should look for and add are indexes on all foreign keys.

Rails migrations by default add a primary key to a new table. PostgreSQL and MySQL automatically add indexes to these primary key fields. Foreign key indexes must be explicitly added to the database via a migration.

Joining tables is an expensive operation. Creating an index for a foreign key field allows the query optimizer to pull data from the index instead of having to perform a table scan, which is much faster.

### Partial Indexes

As the size of a table grows, creating specific indexes that are not only for a specific column, but an index that only contains a subset of the data can help make data retrieval more efficient.

## Inner joins vs left joins

## Common Table Expressions (CTE)

## Wrap-up